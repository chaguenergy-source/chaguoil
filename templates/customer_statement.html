{% extends 'index.html' %}
{% load humanize %}
{% load static %}
{% block additional_css %}
<link rel="stylesheet" href="{% static 'css/customerStatement.css' %}">
{% endblock %}


{% block page_content %}



<div class="table-data" id="invoice_wrapper" style="min-height: 85vh;overflow-y: auto;overflow-x: hidden;" >
    
    <div class="order fontColor ">

        {% include 'headingInvoice.html' %} 

    <div>    

      


        <div class="row" id="customerDetails" >  
            <div class="col-12">
                <strong> {% if useri.langSet == 0 %}Taarifa za Mteja {% else %}Customer Details {% endif %}</strong> 
            </div>  
            <div class="col-md-5 row">

                <div class="col-3">
                    {% if useri.langSet == 0 %}Jina{% else %}Name{% endif %}
                </div>

                <div class="col-9 bluePrint weight600">
                    {{cust.jina}}
                </div>
                <div class="col-3">
                    {% if useri.langSet == 0 %}Anwani{% else %}Address{% endif %}
                </div>
                <div class="col-9">
                    {{cust.address }}  
                </div>

                <div class="col-3">
                    {% if useri.langSet == 0 %}Simu{% else %}Phone{% endif %}
                </div>
                <div class="col-9">
                    {{cust.code}}{{cust.simu1}}{% if cust.simu2 %}, {{cust.code}}{{cust.simu2}} {%endif%}
                </div>
                
                {% if cust.email %} 
                        <div class="col-3">
                            Email
                        </div>
                        <div class="col-9">
                            {{cust.email}}
                        </div>
                {% endif %}


                                <!-- <hr class="col-12"> -->
                <div class="col-3">
                    {% if useri.langSet == 0 %}Oda zenye ukomo{% else %}Limited Order{% endif %}
                    <!-- <a href = "/salepurchase/priveiw" >onesha</a> -->
                </div>
                <div class="col-9  ">
                     {% if cust.limited_order %}
                     <span class="green">
                        
                        {% if useri.langSet == 0 %}Ndio{% else %}Yes {% endif %}
                     </span>
                     {% else %}
                      <span class="brown">
                         {% if useri.langSet == 0 %}Hapana{% else %} No{% endif %}
                      </span>
                     {% endif %}
 
                      
                </div>
                 
   

        

            </div>
        
        </div>

        

        <ul class="nav nav-tabs smallerFont mt-3 d-flex">
            <li class="nav-item">
                <a class="nav-link  "  data-show="this_Month"  href="/salepurchase/ViewCustomer?i={{ cust.id }}">{% if useri.langSet == 0 %}Mwezi Huu{% else %} This Month{% endif %}</a>
            </li>

            <li class="nav-item">
                <a class="nav-link  {% block order_payments_active %}  {% endblock %}" data-show="order_payments" href="/salepurchase/orderPayments?cust={{ cust.id }}">{% if useri.langSet == 0 %}Oda na Malipo{% else %}Order & Payments{% endif %}</a>
            </li>

            <li class="nav-item">
                <a class="nav-link active" data-show="customer_statement" href="/salepurchase/customer_statement?cust={{ cust.id }}">{% if useri.langSet == 0 %}Taarifa za Mteja{% else %}Customer Statement{% endif %}</a>    
            </li>

            <li class="nav-item">
                <a class="nav-link  {% block attachments_active %}  {% endblock %}" data-show="attachments" href="/salepurchase/customerAttachments?cust={{ cust.id }}">{% if useri.langSet == 0 %}Viambatisho{% else %}Attachments{% endif %}</a>
            </li>    
        </ul>

       <!-- Customer Statement Report Section -->

<div class="customer-statement-report mt-4 list_toggle customer_statement" id="customer_statement" data-cust="{{ cust.id }}">
    <div class="card p-3">
        <div class="row mb-3 align-items-end">

            <div class="col-md-3">
                <label for="durationSelect" class="smallFont">{% if useri.langSet == 0 %}Muda{% else %}Duration{% endif %}</label>
                <div class="input-group">
                    <input type="text" id="durationSelect" class="form-control form-control-sm" placeholder="{% if useri.langSet == 0 %}Andika jina la Muda{% else %}Enter Duration Name{% endif %}" value="{% now 'F Y' %}" >
                    <div class="input-group-append dropdown">
                        
                        <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="{% if useri.langSet == 0 %}Fungua chaguo{% else %}Toggle options{% endif %}" aria-label="{% if useri.langSet == 0 %}Fungua chaguo{% else %}Toggle options{% endif %}">
                            <span class="sr-only">{% if useri.langSet == 0 %}Fungua chaguo{% else %}Toggle options{% endif %}</span>
                        </button>
                       
                        <div class="dropdown-menu" id="common_duration" >
                            <!-- <a class="dropdown-item duration-option" href="#" data-value="this_month">{% if useri.langSet == 0 %}Mwezi Huu{% else %}This Month{% endif %}</a>
                            <a class="dropdown-item duration-option" href="#" data-value="last_month">{% if useri.langSet == 0 %}Mwezi Uliopita{% else %}Last Month{% endif %}</a>
                            <a class="dropdown-item duration-option" href="#" data-value="this_year">{% if useri.langSet == 0 %}Mwaka Huu{% else %}This Year{% endif %}</a> -->
                        </div>
                    </div>
                </div>
                
            </div>
            <div class="col-md-3">
                <label for="fromDate" class="smallFont">{% if useri.langSet == 0 %}Kutoka{% else %}From{% endif %}</label>
                <input type="date" id="fromDate" class="form-control form-control-sm">
            </div>
           
            <div class="col-md-3">
                <label for="toDate" class="smallFont">{% if useri.langSet == 0 %}Hadi{% else %}To{% endif %}</label>
                <input type="date" id="toDate" class="form-control form-control-sm">
            </div>
            <div class="col-md-3">
                <label for="stationSelect" class="smallFont">{% if useri.langSet == 0 %}Kituo{% else %}Station{% endif %}</label>
                <select id="stationSelect" class="form-control form-control-sm">
                    <option value="0" selected>{% if useri.langSet == 0 %}Vituo Vyote{% else %}All Stations{% endif %}</option>
                      {% for station in stations %}
                        <option value="{{ station.by.Interprise.id }}">{{ station.by.Interprise.name }}</option>
                      {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-12 text-right">
                    <button id="printStatement" class="btn btn-secondary btn-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-printer">
                                <polyline points="6 9 6 2 18 2 18 9"></polyline>
                                <rect x="2" y="9" width="20" height="11" rx="2" ry="2"></rect>
                                <path d="M6 19v2a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-2"></path>
                            </svg>
                            {% if useri.langSet == 0 %}Chapisha Ripoti{% else %}Print Report{% endif %}
                    </button>

                <button id="generateStatement" class="btn btn-primary btn-sm">{% if useri.langSet == 0 %}Ongeza Ripoti{% else %}Generate Report{% endif %}</button>
            </div>
        </div>

       
          <div id="TheReportData">
            <div id="statementResults">
            <div class="row">
                <div class="col-md-6">
                    <h6 class="section-title">{% if useri.langSet == 0 %}Muhtasari wa Matumizi ya Mafuta{% else %}Fuel Consumption Summary{% endif %}</h6>
                  
                    <table class="table table-sm table-striped" id="fuelSummaryTable">
                        <thead>
                            <tr>
                                <th>{% if useri.langSet == 0 %}Mafuta{% else %}Fuel{% endif %}</th>
                                <th class="text-right">{% if useri.langSet == 0 %}Bei {% else %}Price{% endif %}</th>
                                <th class="text-right">{% if useri.langSet == 0 %}Kiasi{% else %}Qty{% endif %}</th>
                                <th class="text-right">{% if useri.langSet == 0 %}Thamani{% else %}Amount{% endif %}</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="col-md-6">
                    <h6 class="section-title">{% if useri.langSet == 0 %}Malipo kwa Tarehe na Akaunti{% else %}Payments by Date and Account{% endif %}</h6>
                    <table class="table table-sm table-striped" id="paymentsSummaryTable">
                        <thead>
                            <tr><th>{% if useri.langSet == 0 %}Tarehe{% else %}Date{% endif %}</th><th>{% if useri.langSet == 0 %}Akaunti{% else %}Account{% endif %}</th><th class="text-right">{% if useri.langSet == 0 %}Kiasi{% else %}Amount{% endif %}</th></tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="col-md-12">
                    <h6 class="section-title">{% if useri.langSet == 0 %}Deni/Salio{% else %}Debt/Balance{% endif %}</h6>
                    <div class="alert alert-info" id="deni_au_balance" >
                        <strong>{% if useri.langSet == 0 %}Salio/Deni:{% else %}Debt/Balance:{% endif %}</strong>
                        <span id="outstandingBalance" class="h5 text-danger">0.00</span> <span class="text-primary">{{currencii}}</span>
                    </div>
                </div>
                </div>
            </div>

            <hr>

            <h6 class="section-title">{% if useri.langSet == 0 %}Muhtasari wa Muamala (Matumizi & Malipo){% else %}Transactions (Consumption & Payments){% endif %}</h6>
            <div class="table-responsive">
                <table class="table table-sm table-bordered" id="transactionsTable">
                    <thead>
                        <tr>
                            <th>{% if useri.langSet == 0 %}Tarehe{% else %}Date{% endif %}</th>
                            <th>{% if useri.langSet == 0 %}Type{% else %}Type{% endif %}</th>
                            <th>{% if useri.langSet == 0 %}Kituo{% else %}Station{% endif %}</th>
                            <th>{% if useri.langSet == 0 %}Imeandikishwa na{% else %}Recorded By{% endif %}</th>

                            <th>{% if useri.langSet == 0 %}Maelezo{% else %}Details{% endif %}</th>
                            <th>{% if useri.langSet == 0 %}Mudarasa{% else %}Driver{% endif %}</th>
                            <th>{% if useri.langSet == 0 %}Gari{% else %}Vehicle{% endif %}</th>
                            <th class="text-right">{% if useri.langSet == 0 %}Mafuta{% else %}Fuel{% endif %}</th>

                            <th class="text-right">{% if useri.langSet == 0 %}Bei{% else %}Price{% endif %} <span class="text-primary">{{currencii}}</span> </th>
                            <th class="text-right">{% if useri.langSet == 0 %}Kiasi{% else %}Qty{% endif %}<span class="text-primary">LTRS</span></th>
                            <th class="text-right">{% if useri.langSet == 0 %}Thamani{% else %}Amount{% endif %}<span class="text-primary">{{currencii}}</span></th>
                            <th class="text-right">{% if useri.langSet == 0 %}Salio{% else %}Balance{% endif %}<span class="text-primary">{{currencii}}</span></th>
                            <th class="text-right">{% if useri.langSet == 0 %}Deni{% else %}Debt{% endif %}<span class="text-primary">{{currencii}}</span></th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            </div>

        </div>
    </div>
</div>



    </div>
    </div>

    <input type="hidden" name="printedBy" value="{{useri.user.first_name}} {{useri.user.last_name}}" id="printedBy">

 </div> 

{% endblock %}


{% block additionaljs %}
<script src="{% static 'js/customerStatement.js' %}"></script>
{% endblock %}



{% block customers %} active  {% endblock %}