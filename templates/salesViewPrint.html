{% load humanize %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" >

	



	<link rel="stylesheet" href="/static/css/mediascreen.css">
	<link rel="stylesheet" href="/static/css/style.css">
	<link rel="stylesheet" href="/static/css/companyheader.css">




    <!-- Latest compiled and minified CSS -->

    <!-- Latest compiled and minified JavaScript -->
    <!-- <script src="{% static 'js/bootstrap-select.min.js' %}"></script> -->
    
	<!-- <script src="{% static 'js/validator.min.js' %}"></script> -->
        <link href="{% static 'css/toastr.min.css' %}" rel="stylesheet">


<script src="/static/js/jquery.js" crossorigin="anonymous"></script>
<script src="/static/js/bootstrap.min.js" ></script>
<!-- <script src="/static/js/moment.min.js" ></script> -->
<script src="/static/js/momentlocale.js" ></script>
<script src="{% static 'js/qrcode.min.js' %}"></script>

    <title>
        SA-{{trf.code}}
    </title>
    <style>
      
    </style>
</head>
<body>
    <div class="classic_div mt-sm-2 pt-3 pb-2 px-3 the_invo_page" id="the_invo_page" >
   
<!-- 
        <h6 class="text-center">{{kampuni.jina}} | {{kampuni.address}} </h6>
        
        <h6 class="text-center ">{% if langSet == 0 %}Simu {% else %}Phone{% endif %}: {{kampuni.phone}} | email: {{kampuni.email}}</h6>
        <hr> -->

        {% include 'companyHeader.html' %}


      <h5 class="text-secondary mt-1 pb-3  border-bottom font-weight-bold">
        {% if langSet == 0 %}ANKARA  {% else %}INVOICE{% endif %}
    </h5>
     <div class="row mt-3">

                         <div class="col-3">
                            {% if useri.langSet == 0 %}Tarehe {% else %}Date{% endif %}
                         </div>
                         <div class="col-9">
                            <script>
                                document.write(moment('{{trf.date | date:"r" }}').format('DD/MM/YYYY HH:mm '))
                            </script>                         
                        </div>
                         <div class="col-3">
                            {% if useri.langSet == 0 %}Kurekodiwa {% else %}Recorded{% endif %}
                         </div>
                         <div class="col-9">
                            <script>
                                document.write(moment('{{trf.recDate | date:"r" }}').format('DD/MM/YYYY HH:mm '))
                            </script>                         
                        </div>

                         <div class="col-3">
                            {% if useri.langSet == 0 %}Kituo {% else %}Station{% endif %}
                         </div>
                         <div class="col-9">
                            {{trf.by.Interprise.name}}
                        </div>

                         <div class="col-3">
                            {% if useri.langSet == 0 %}Mauzo {% else %}Sales{% endif %}#
                         </div>
                         <div class="col-9">
                            SA-{{trf.code}}
                         </div>
                         <div class="col-3">
                            {% if useri.langSet == 0 %}Statasi {% else %}Status{% endif %}
                         </div>
                         <div class="col-9">
                             {% if trf.amount == trf.payed %}
                            <span class="status completed">
                               {% if useri.langSet == 0 %}Imelipwa{% else %}Paid{% endif %}
                            </span>
                          {% endif %}  

                          {% if trf.amount > trf.payed and trf.payed > 0 %}
                             <span class="status process">
                               {% if useri.langSet == 0 %}Imelipwa Kiasi{% else %}Less Paid{% endif %}
                             </span>
                          {% endif %}  

                          {% if  trf.payed == 0 %}
                             <span class="status pending">
                               {% if useri.langSet == 0 %}Haijalipwa{% else %}Unpaid{% endif %}
                             </span>
                          {% endif %}  
                         </div>


                     </div>
                     <hr>
                     <div class="row">
                        <div class="col-6 ">

                            <div class="row">
                                <div class="col-12">
                                    <strong> {% if useri.langSet == 0 %}Taarifa za Wahusika{% else %}Incharge Details{% endif %}</strong>
                                </div>
                               <div class="col-4">
                                    {% if useri.langSet == 0 %}Mauzo/Kutoka {% else %}Sales/From{% endif %}
                                </div>
                                <div class="col-8">
                                    {% if not trf.cont %}
                                        <strong>
                                            {% if useri.langSet == 0 %}Pampu{% else %}Pump{% endif %}
                                        </strong>
                                    {% else %}
                                    
                                        <strong>
                                            {% if useri.langSet == 0 %}Tanki{% else %}Tank{% endif %}
                                        </strong>
                                    {% endif %}
                                
                                    
                                </div>

                           

                                {% if trf.cont %}

                                <div class="col-4">
                                    {% if useri.langSet == 0 %}Kutoka Kontena{% else %}From Container{% endif %}
                                </div>
                                <div class="col-8 ">
                                    <u class="brown">{{trf.cont.name | title}}</u>  
                                </div>

                                <div class="col-4">
                                    {% if useri.langSet == 0 %}Mhusika {% else %}Incharge{% endif %}
                                </div>
                                <div class="col-8">
                                       <span class="bluePrint">{{trf.contInchage.user.first_name | title}}  {{trf.contInchage.user.last_name | title}}</span> ({{trf.tankIncharge.cheo | title}})                     
                                </div>

                                <!-- <div class="col-4">
                                    {% if useri.langSet == 0 %}Kama{% else %}Position{% endif %}
                                </div>
                                <div class="col-8">
                                        {{trf.tankIncharge.cheo | title}}                     
                                </div> -->

                                {% endif %}

                                 {% if trf.session %}
                                  <div class="col-4">
                                    {% if useri.langSet == 0 %}Mpango Zamu{% else %}Shift Session{% endif %}
                                </div>
                                <div class="col-8">
                                    <a href="/salepurchase/SessionView?i={{trf.session.id}}">{{trf.session.session.name}}</a>
                                </div>                              

                                {% endif %}

                                <div class="col-4">
                                    {% if useri.langSet == 0 %}Rekodi Na{% else %}Record By{% endif %}
                                </div>
                                <div class="col-8">
                                    <span class="bluePrint"> {{trf.by.user.user.first_name | title}} {{trf.by.user.user.last_name | title}}</span>
                                   ({{trf.by.user.cheo | title}})
                                </div>

                                <!-- <div class="col-4">
                                    {% if useri.langSet == 0 %}Kama{% else %}Position{% endif %}
                                </div>
                                <div class="col-8">
                                    
                                </div>                                 -->
                            </div>
                            

                        </div>

                        <div class="col-6 ">
                          <div class="row">
                                <div class="col-12">
                                      <strong> {% if useri.langSet == 0 %}Taarifa za Mteja{% else %}Customer Details{% endif %}</strong>
                                  </div>
                                    <div class="col-3">
                                      {% if useri.langSet == 0 %}Jina{% else %}Name{% endif %}
                                    </div>
                                    <div class="col-9">
                                        <a href="/salepurchase/ViewCustomer?i={{trf.customer.id}}"><u>{{trf.customer.jina | title}}</u> </a>   
                                    </div>
                                    <div class="col-3">
                                      {% if useri.langSet == 0 %}Anwani{% else %}Address{% endif %}
                                    </div>
                                    <div class="col-9">
                                      {{trf.customer.address | title}}  
                                    </div>

                                  <div class="col-3">
                                      {% if useri.langSet == 0 %}Simu{% else %}Phone{% endif %}
                                    </div>
                                    <div class="col-9">
                                      {{trf.customer.code}}{{trf.customer.simu1}}{% if trf.customer.simu2 %}, {{trf.customer.code}}{{trf.customer.simu2}} {%endif%}
                                    </div>
                                  
                                  {% if trf.customer.email %} 
                                          <div class="col-3">
                                              Email
                                          </div>
                                          <div class="col-9">
                                              {{trf.customer.email}}
                                          </div>
                                  {% endif %}
                          </div>
 

                        </div>
                     </div>

                     <hr>
                        <div class="row">
                            <div class="col-6 row">
                              <div class="col-12">
                                <strong> {% if useri.langSet == 0 %}Taarifa za Mpokeaji{% else %}Received By Details{% endif %}</strong>
                            </div>
                                <div class="col-6">
                                  {% if useri.langSet == 0 %}Deleva/Mpokeaji{% else %}Driver/Incharge{% endif %}
                                </div>
                                <div class="col-6">
                                   {{trf.driver}}
                                </div>
                                <div class="col-6">
                                  {% if useri.langSet == 0 %}Gari/Chombo{% else %}Vihecle{% endif %}
                                </div>
                                <div class="col-6">
                                   {{trf.vihecle}}
                                </div>
                                
                                {% if trf.phone %}
                                <div class="col-6">
                                  {% if useri.langSet == 0 %}Namba ya Simu{% else %}Phone Number{% endif %}
                                </div>
                                <div class="col-6">
                                   {{trf.phone}}
                                </div>
                               {% endif %}
                            </div>
                        </div>
                     <hr>


                     <div class="table-responsive">
                        <strong>{% if useri.langSet == 0 %}Orodha ya Mauzo{% else %}Sales List{% endif %}</strong>
                        <table class="table table-bordered table-sm">
                            <thead>
                                <tr class="smallFont" >
                                    <th>#</th>
                                    <th>{% if useri.langSet == 0 %}Mafuta{% else %}Fuel{% endif %}</th>
                                    {% if trf.cont %}
                                     <th>{% if useri.langSet == 0 %}Tanki{% else %}Tank{% endif %}</th>
                                    {% else %}
                                      <th>{% if useri.langSet == 0 %}Pampu{% else %}Pump{% endif %}</th>
                                      <th>{% if useri.langSet == 0 %}Mhusika{% else %}Attendant{% endif %}</th>
                                    {% endif %}

                                    <th>{% if useri.langSet == 0 %}Kiasi{% else %} Qty{% endif %} <span class="text-primary">(LTRS)</span> </th>
                                    <th>{% if useri.langSet == 0 %}Bei{% else %} Price{% endif %} <span class="text-primary">/LTRS</span> </th>
                                    <!-- <th>{% if useri.langSet == 0 %}Inayolipwa{% else %} Payable{% endif %} <span class="text-primary">/LTRS</span> </th> -->
                                    <th>{% if useri.langSet == 0 %}Jumla{% else %}Total{% endif %} <span class="text-primary">({{currencii}})</span> </th>
                                </tr>
                            </thead>
                       
                                <tbody>
                                  {% for sl in saList  %}
                                    <tr>
                                        <td>{{forloop.counter}}</td>
                                        <td> <span class="brown">{{sl.theFuel.name}}</span> </td>
                                        {% if trf.cont %}
                                        <td>{{sl.tank.name}}</td>
                                        {% else %}
                                          <td>{{sl.shift.pump.station.name}}  {{sl.shift.pump.name}}</td>
                                          <td>{{sl.shift.shift.by.user.first_name|title}}  {{sl.shift.shift.by.user.last_name|title}} </td>
                                        {% endif %}                                        
                                        <td>{{sl.qty_sold|floatformat:'-2'|intcomma}}</td>
                                        <td>{{sl.sa_price_og|floatformat:'-2'|intcomma}}</td>
                                        <!-- <td>{{sl.sa_price|floatformat:'-2'|intcomma}}</td> -->
                                        <td>{{sl.amounti|floatformat:'-2'|intcomma}}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                              </table>


                     </div>

                     <div class="row">
                        <div class="col-md-6"></div>
                        <div class="col-md-6 row smallFont">
                                     

                             {% if disc %}
                              <div class="col-6">
                                {% if useri.langSet == 0 %}Total{% else %}Jumla{% endif %}
                              </div>
                              <div class="col-6 brown  text-right">
                                    <small class="text-primary">{{currencii}}</small>.{{trf.tot_og| floatformat:'-2'  | intcomma}}                          
                               </div>
                              <div class="col-6">
                                {% if useri.langSet == 0 %}Punguzo{% else %}Discount{% endif %}
                              </div>
                              <div class="col-6 brown  text-right">
                                    <small class="text-primary">{{currencii}}</small>.{{disc| floatformat:'-2'  | intcomma}}                          
                               </div>
                               {% endif %}

                              <div class="col-6">
                                {% if useri.langSet == 0 %}Deni{% else %}Debt{% endif %}
                              </div>
                              <div class="col-6 brown  text-right">
                                    <small class="text-primary">{{currencii}}</small>.{{trf.debt| floatformat:'-2'  | intcomma}}                          
                               </div>

                            <div class="col-6">
                                {% if useri.langSet == 0 %}Ilolipwa{% else %}Paid{% endif %}
                              </div>
                              <div class="col-6 text-right">
                                <small class="text-primary">{{currencii}}</small>.{{trf.payed | floatformat:'-2'  | intcomma}} 
                              </div>

                              
                              <!-- <hr class="col-12"> -->

                              <div class="col-6 weight600">
                                {% if useri.langSet == 0 %}Malipo Jumla{% else %}Total Payable {% endif %}
                              </div>
                              <div class="col-6  weight600 text-right">
                                <small class="text-primary">{{currencii}}</small>.{{trf.amount | floatformat:'-2'  | intcomma}} 
                              </div>
                         
                        </div>
                     </div>

                
           

                     


                  
         <hr>

         <div class="mt-3" >
            <strong>
                {% if langSet == 0 %}Uhakiki{% else %}Approval{% endif %}
            </strong>
        </div>
        <table class="table table-bordered table-sm" >
              <thead>
                <tr>
                    <th>#</th>
                    <th>{% if langSet == 0 %}Jina{% else %}Name{% endif %}</th>
                    <th>{% if langSet == 0 %}Nafasi{% else %}Position{% endif %}</th>
                    <th>{% if langSet == 0 %}TareheMuda{% else %}DateTime{% endif %}</th>
                    <th>{% if langSet == 0 %}Sahihi{% else %}Signature{% endif %}</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                    <td>1</td>
                    <td>{{trf.by.user.user.first_name | title}} {{trf.by.user.user.last_name | title}} </td>
                    <td>{{trf.by.user.cheo | title}} </td>
                    <td></td>
                    <td></td>
                </tr>

                <tr>
                    <td>2</td>
                    <td>
                        {{trf.driver | title}}  
                    </td>
                    <td>  </td>
                    <td></td>
                    <td></td>
                </tr>   

                {% if trf.cont %}
                <tr>
                    <td>3</td>
                    <td>
                        {{trf.tankIncharge.user.first_name | title}}  {{trf.tankIncharge.user.last_name | title}} 
                    </td>
                    <td>{{trf.tankIncharge.cheo | title}} </td>
                    <td></td>
                    <td></td>
                </tr>                
                {% endif %}

                {% if trf.session %}
                {% for p in pmpA %}
                   
                      <tr>
                          <td> 
                            <script>
                                var lp = Number('{{forloop.counter}}'),
                                ind = lp+2
                                document.write(ind)
                          </script> 
                          </td>
                          <td>
                                {{p.shift.shift.by.user.first_name | title}} {{p.shift.shift.by.user.last_name | title}}
                          </td>
                          
                          <td>{{p.shift.shift.by.cheo}}</td>
                          <td></td>
                          <td></td>
                      </tr>
                   
                    {% endfor %}
                    
                {% endif %}



                <tr>
                    <td>4</td>
                    <td>
                        
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>
                        
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
              </tbody>
        </table>




         <h6 class="row ">
            <div class="col-5">
     
             <div class="col-12">
                 <div id="imgBox">
                     <img src="" alt="" id="qrImage">
                 </div>
               </div>
     
     
               <script>
                  $(document).ready(function(){
                     $('#CompanyTitle').prop('hidden',false)
                     const url = window.location.host;
                     const imgBox= document.getElementById("imgBox")
     
                       qrcode = new QRCode('imgBox',{
                         text:`${url}/salepurchase/viewFuelSales?i={{trf.id}}`,
                         height:150,
                         width:150,
                       
                     })
                  })
               </script>
     
            </div>
      </h6>

    

        </div>
</body>    